---
title: VPS上部署hysteria2节点
---
1. #### 系统更新&安装必要工具

   ```bash
   apt update && apt upgrade -y
   apt install -y curl wget nano ufw openssl iptables-persistent
   ```

1. #### 安装官方脚本

   ```bash
   bash <(curl -fsSL https://get.hy2.sh/)
   ```

1. #### 生成自签证书

   ```bash
   mkdir -p /etc/hysteria
   openssl req -x509 -newkey ec:<(openssl ecparam -name prime256v1) \
     -nodes -keyout /etc/hysteria/server.key \
     -out /etc/hysteria/server.crt \
     -days 3650 -subj "/CN=www.bing.com"
   
   chmod 644 /etc/hysteria/server.crt
   chmod 600 /etc/hysteria/server.key
   chown root:root /etc/hysteria/server.*
   ```

1. 编写配置文件

   ```bash
   cat > /etc/hysteria/config.yaml << 'EOF'
   listen: :9527
   
   tls:
     cert: /etc/hysteria/server.crt
     key: /etc/hysteria/server.key
   
   auth:
     type: password
     password: pwss   # 你可以改成自己的强密码
   
   masquerade:
     type: proxy
     proxy:
       url: https://www.bing.com
       rewriteHost: true
   
   # 可选：限制带宽避免被 QoS
   bandwidth:
     up: 100 mbps
     down: 100 mbps
   EOF
   ```

1. #### 放行防火墙

   ```bash
   ufw allow 9526/udp
   ufw reload
   # 或 iptables（如果没用 ufw）
   iptables -I INPUT -p udp --dport 9526 -j ACCEPT
   netfilter-persistent save
   ```

1. #### 启动服务

   ```bash
   systemctl daemon-reload
   systemctl restart hysteria-server
   systemctl enable hysteria-server   # 开机自启
   systemctl status hysteria-server
   ```

   看到 active (running) + "server up and running" → 成功！

   ##### 确认端口监听：

   ```bash
    ss -ulnp | grep 9527
   ```

   应该看到：

   ```bash
    udp   UNCONN 0      0         *:9526        *:*    users:(("hysteria",pid=xxxx,fd=x))
   ```

1. #### 客户端链接

   ```bash
   hysteria2://pwss@你的VPS_IP:9527/?insecure=1&sni=www.bing.com
   ```

1. #### 测试链接

   ##### 在 VPS 上装 iperf3 测试 UDP：

   ```bash
   apt install -y iperf3
   iperf3 -s -u -p 9526
   ```

   ##### 在 Mac/PC 上：

   ```bash
   iperf3 -c VPS_IP -u -p 9527 -b 0 -t 30
   ```
